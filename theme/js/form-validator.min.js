function validateAll(){var e={};for(var t in constraints){var n=validateOne(document.getElementById(t));isEmpty(n)||(e[t]=n)}return e}function validateOne(e){e.preventDefault&&(e=e.target);var t=validate({value:e.value},{value:constraints[e.id]})||{};return isEmpty(t)?resetInput(e):errorInput(e,t),t}function errorInput(e,t){if(!currentErrors[e.id]){var n=document.createElement("div");n.classList.add("err"),e.parentElement.parentElement.insertBefore(n,e.parentElement),currentErrors[e.id]=n}currentErrors[e.id].innerText=t.value[0];for(var r=1;r<t.value.length;r++)currentErrors[e.id].innerText+="\n"+t.value[r]}function resetInput(e){currentErrors[e.id]&&(currentErrors[e.id].parentElement.removeChild(currentErrors[e.id]),delete currentErrors[e.id])}function success(){document.getElementById("gform").submit(),document.getElementById("gform").style="display:none;",document.getElementById("thank-you").style="display:block"}function isEmpty(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!=typeof e)return!0;var t=Object.prototype.hasOwnProperty;for(var n in e)if(t.call(e,n))return!1;return!0}var currentErrors=[],inputs=[],stopEnter=!1;for(var prop in constraints){var input=document.getElementById(prop);inputs.push(input);var press=function(e){"9"!=e.keyCode&&validateOne(this)};input.addEventListener("focus",function(e){this.addEventListener("keyup",press)}),input.addEventListener("focusout",function(e){e.target.removeEventListener("keyup",press),validateOne(this)}),"TEXTAREA"==input.nodeName&&(input.addEventListener("keydown",function(e){if("13"==e.keyCode)if(e.ctrlKey){stopEnter=!1;var t=this.value,n=this.selectionStart,r=t.slice(0,this.selectionStart),i=t.slice(this.selectionEnd,t.length);this.value=r+"\n"+i,this.selectionStart=n+1,this.selectionEnd=n+1}else e.stopImmediatePropagation(),stopEnter=!0}),input.addEventListener("keypress",function(e){if("13"==e.keyCode&&stopEnter){e.stopImmediatePropagation();for(var t=0;t<inputs.length;t++)this==inputs[t]&&(stopEnter=!1,inputs[t+1].focus())}}))}document.getElementById("gform").addEventListener("submit",function(e){e.preventDefault();for(var t=document.activeElement,n=document.querySelector(".gform input[type=submit]"),r=0;r<inputs.length;r++)t==inputs[r]&&(inputs[r]==n||inputs[r+1]==n?(n.focus(),isEmpty(validateAll())&&success()):inputs[r+1].focus())});
